function init(){console.log("--- init"),screenW=window.innerWidth,screenH=window.innerHeight,dotRows=Math.sqrt(dotNumber*(screenH/screenW)),dotColumns=dotNumber/dotRows;var s=Math.round(screenW/dotColumns),e=Math.round(screenH/dotRows);for(dotRows=Math.round(dotRows),dotColumns=Math.round(dotColumns),console.log("--- calc done"),i=0,j=0,k=0;i<dotNumber;i++,k++)for(i%dotColumns===0&&(j++,k=0),dots[i]={},dots[i].distances=[],dots[i].el=dotMatrix.cloneNode(!1),dots[i].X=k*s+s/2,dots[i].X+=Math.floor(Math.random()*dotRandomMax+1-dotRandomMax/2),dots[i].Y=j*e-e/2,dots[i].Y+=Math.floor(Math.random()*dotRandomMax+1-dotRandomMax/2),dots[i].r=1,dots[i].lines=[],dots[i].el.setAttribute("cx",dots[i].X),dots[i].el.setAttribute("cy",dots[i].Y),dots[i].el.setAttribute("r",dots[i].r),svg.appendChild(dots[i].el),l=0;l<lineNumber;l++)dots[i].lines[l]={},dots[i].lines[l].el=lineMatrix.cloneNode(!1),dots[i].lines[l].X1=dots[i].X,dots[i].lines[l].Y1=dots[i].Y,dots[i].lines[l].X2=dots[i].X,dots[i].lines[l].Y2=dots[i].Y,dots[i].lines[l].el.setAttribute("x1",dots[i].lines[l].X1),dots[i].lines[l].el.setAttribute("y1",dots[i].lines[l].Y1),svg.appendChild(dots[i].lines[l].el);console.log("--- dots positioned")}function destroy(){for(;svg.firstChild;)svg.removeChild(svg.firstChild);dots.length=0,lines.length=0,console.log("--- destroying")}function dotUpdate(){for(i=0;i<dotNumber;i++)for(dots[i].el.setAttribute("cx",dots[i].X),dots[i].el.setAttribute("cy",dots[i].Y),dots[i].el.setAttribute("r",dots[i].r),l=0;l<lineNumber;l++)dots[i].lines[l].el.setAttribute("x1",dots[i].lines[l].X1),dots[i].lines[l].el.setAttribute("y1",dots[i].lines[l].Y1),dots[i].lines[l].el.setAttribute("x2",dots[i].lines[l].X2),dots[i].lines[l].el.setAttribute("y2",dots[i].lines[l].Y2)}function getDistance(s,e){return Math.floor(Math.sqrt(Math.pow(s.X-e.X,2)+Math.pow(s.Y-e.Y,2)))}function Comparator(s,e){return s[1]<e[1]?-1:s[1]>e[1]?1:0}function moveDots(){for(i=0;i<dotNumber;i++){for(dots[i].X+=Math.floor(5*Math.random()-2),dots[i].Y+=Math.floor(5*Math.random()-2),j=0;j<dotNumber;j++)dots[i].distances[j]=[j,getDistance(dots[i],dots[j])];for(dots[i].distances=dots[i].distances.sort(Comparator),k=0;k<lineNumber;k++)dots[i].lines[k].X1=dots[i].X,dots[i].lines[k].Y1=dots[i].Y,dots[i].lines[k].X2=dots[dots[i].distances[k][0]].X,dots[i].lines[k].Y2=dots[dots[i].distances[k][0]].Y}dotUpdate()}function mouseInteraction(){if(mouseMoving){for(mouse.X=mouseX,mouse.Y=mouseY,i=0;i<dotNumber;i++)dots[i].r=1,mouse.distances[i]=[i,getDistance(mouse,dots[i])];for(mouse.distances=mouse.distances.sort(Comparator),j=0;j<mouse.power;j++){var s=mouse.distances[mouse.power-1][1],e=mouse.distances[j][1];dots[mouse.distances[j][0]].r=2,mouseX>=dots[mouse.distances[j][0]].X?dots[mouse.distances[j][0]].X-=(s-e)/15:dots[mouse.distances[j][0]].X+=(s-e)/15,mouseY>=dots[mouse.distances[j][0]].Y?dots[mouse.distances[j][0]].Y-=(s-e)/15:dots[mouse.distances[j][0]].Y+=(s-e)/15}mouseMoving=!1}}var svg=document.getElementById("interactive--web"),dotMatrix=document.createElementNS("http://www.w3.org/2000/svg","circle"),dots=[],lineMatrix=document.createElementNS("http://www.w3.org/2000/svg","line"),lines=[],dotNumber=300,lineNumber=5,screenW,screenH,dotColumns,dotRows,dotRandomMax=2,mouseMoving=!1,mouse={};mouse.distances=[],mouse.power=10,init();var initInterval=setInterval(function(){moveDots(),mouseInteraction()},20);svg.addEventListener("mousemove",function(s){mouseMoving=!0,mouseX=s.pageX,mouseY=s.pageY}),window.addEventListener("resize",function(){destroy(),init()});